<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>점심 메뉴 메인</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="container">
    <h1>점심 메뉴 관리</h1>

    <button onclick="location.href='register.html'">메뉴 등록 화면 이동</button>
    <button onclick="location.href='list.html'">메뉴 목록 조회 화면 이동</button>

    <hr>

    <h1>오늘의 점심 추천</h1>
    <label>맵기 정도</label>
    <select id="spicy">
        <option value="1">순한맛</option>
        <option value="2">보통</option>
        <option value="3">매운맛</option>
    </select>

    <label>예산</label>
    <select id="budget">
        <option value="10000">~10,000원</option>
        <option value="15000">~15,000원</option>
        <option value="20000">~20,000원</option>
    </select>

    <label>음식 종류</label>
    <div class="checkbox-group">
        <input type="checkbox" id="korean" value="한식"><label for="korean">한식</label>
        <input type="checkbox" id="chinese" value="중식"><label for="chinese">중식</label>
        <input type="checkbox" id="japanese" value="일식"><label for="japanese">일식</label>
        <input type="checkbox" id="western" value="양식"><label for="western">양식</label>
    </div>

    <label>오늘의 기분</label>
    <div class="radio-group">
        <input type="radio" id="happy" name="mood" value="행복"><label for="happy">행복</label>
        <input type="radio" id="sad" name="mood" value="슬픔"><label for="sad">슬픔</label>
        <input type="radio" id="tired" name="mood" value="피곤"><label for="tired">피곤</label>
        <input type="radio" id="excited" name="mood" value="신남"><label for="excited">신남</label>
    </div>

    <button id="recommend">추천 받기</button>
    <div id="result"></div>
</div>

<script src="script.js"></script>
<script>
    document.getElementById("recommend").addEventListener("click", async () => {
        const menus = await fetchMenus();
        const spicyLevel = parseInt(document.getElementById("spicy").value);
        const budget = parseInt(document.getElementById("budget").value);
        const categories = Array.from(document.querySelectorAll(".checkbox-group input:checked")).map(el=>el.value);
        const mood = document.querySelector(".radio-group input:checked")?.value;

        let filtered = menus.filter(menu =>
            menu.spicyLevel <= spicyLevel &&
            menu.price <= budget &&
            categories.includes(menu.category) &&
            menu.mood.includes(mood)
        );

        const resultDiv = document.getElementById("result");
        if(filtered.length>0){
            const choice = filtered[Math.floor(Math.random()*filtered.length)];
            resultDiv.textContent = `추천 메뉴: ${choice.name} (${choice.category}, ${choice.price}원, 매움 단계 ${choice.spicyLevel})`;
        } else {
            resultDiv.textContent = "조건에 맞는 메뉴가 없습니다.";
        }
    });
</script>
</body>
</html>